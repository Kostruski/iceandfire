(this.webpackJsonpiceandfire=this.webpackJsonpiceandfire||[]).push([[0],{47:function(e,t,c){},48:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(17),r=c.n(s),i=c(8),l=c.n(i),j=c(18),o=c(3),d=c(19),b=c.n(d),u=c(0),h=function(e){var t,c=e.isBook,n=e.goBack,a=e.lastPage,s=e.setPage,r=e.url,i=r,l=parseInt(null===(t=r.match(/page=(\d+)/))||void 0===t?void 0:t[1]),j=function(e){i=i.replace(/(page=)(\d+)/,"$1".concat(e)),s(i)};return Object(u.jsx)("nav",{children:Object(u.jsx)("div",{className:"nav-wrapper",children:c?Object(u.jsx)("a",{className:"waves-effect waves-light btn",onClick:n,children:"Back to characters"}):Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"pagination",children:[Object(u.jsx)("a",{className:"waves-effect waves-light btn",disabled:1==l,onClick:function(){return j(1)},children:"First"}),Object(u.jsx)("a",{className:"waves-effect waves-light btn",disabled:l==a,onClick:function(){return j(l+1)},children:"Next"}),Object(u.jsx)("a",{className:"waves-effect waves-light btn",disabled:1==l,onClick:function(){return j(l-1)},children:"Prev"}),Object(u.jsx)("a",{className:"waves-effect waves-light btn",disabled:l==a,onClick:function(){return j(a)},children:"Last"}),Object(u.jsx)("div",{className:"right",children:Object(u.jsx)("b",{children:"Current page ".concat(l)})})]})})})})},O=function(){return Object(u.jsx)("div",{className:"preloader-wrapper big active",children:Object(u.jsxs)("div",{className:"spinner-layer spinner-blue-only",children:[Object(u.jsx)("div",{className:"circle-clipper left",children:Object(u.jsx)("div",{className:"circle"})}),Object(u.jsx)("div",{className:"gap-patch",children:Object(u.jsx)("div",{className:"circle"})}),Object(u.jsx)("div",{className:"circle-clipper right",children:Object(u.jsx)("div",{className:"circle"})})]})})},f=c(6),p=c.n(f),x=function(e){var t=e.setPage,c=e.url,a=c,s=Object(n.useState)(""),r=Object(o.a)(s,2),i=r[0],l=r[1],j=Object(n.useState)("Character name"),d=Object(o.a)(j,2),b=d[0],h=d[1],O=c.match(/&name=([a-zA-Z0-9+]+)/);Object(n.useEffect)((function(){p.a.updateTextFields()}),[]),Object(n.useEffect)((function(){h(O?O[1].replace("+"," "):"Character name")}),[c]);return Object(u.jsx)("form",{className:"col s6",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col s12 valign-wrapper",children:["Filter by name:",Object(u.jsxs)("div",{className:"input-field inline",children:[Object(u.jsx)("input",{id:"character",type:"text",value:i,onChange:function(e){return l(e.target.value)},maxLength:"50",placeholder:b}),Object(u.jsx)("label",{htmlFor:"character",children:"Character name"})]}),Object(u.jsx)("button",{className:"btn waves-effect waves-light",type:"submit",name:"action",onClick:function(e){return function(e){if(e.preventDefault(),O)a=a.replace(O[0],""),l("");else{var c=i.trim();a+="&name=".concat(c.replace(/\s+/g,"+"))}t(a)}(e)},disabled:!O&&(i.length>50||0===i.length),children:O?"Clear":"Filter"})]})})})},g=function(e){var t=e.data,c=e.getBookDetails,n=e.isBook,a=n?["name","ISBN","number of pages","release date"]:["names and aliases","gender","culture","books","seasons"];return Object(u.jsxs)("table",{className:"responsive-table",children:[Object(u.jsx)("thead",{children:Object(u.jsx)("tr",{children:a.map((function(e,t){return Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:e})},e=t)}))})}),Object(u.jsx)("tbody",{children:n?Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t.name}),Object(u.jsx)("td",{children:t.isbn}),Object(u.jsx)("td",{children:t.numberOfPages}),Object(u.jsx)("td",{children:t.released})]}):t.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.name}),Object(u.jsx)("td",{children:e.gender}),Object(u.jsx)("td",{children:e.culture}),Object(u.jsx)("td",{children:e.books.map((function(e,t){return Object(u.jsx)("a",{className:"waves-effect waves-light btn book-btn",onClick:function(){return c(e.link)},children:e.id},e+t)}))}),Object(u.jsx)("td",{children:e.seasons})]},e.name+t)}))})]})},v=function(e){var t=e.url,c=e.setPage,a=(e.isLoading,t);Object(n.useEffect)((function(){var e=document.querySelectorAll("select");p.a.FormSelect.init(e,{})}),[]);return Object(u.jsx)("div",{className:"input-field col s3 valign-wrapper",children:Object(u.jsxs)("select",{onChange:function(e){return t=e.target.value,a=a.replace(/(pageSize=)(\d+)/,"$1".concat(t)),void c(a);var t},value:"",children:[Object(u.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Rows per page"}),Object(u.jsx)("option",{value:"5",children:"5"}),Object(u.jsx)("option",{value:"10",children:"10"}),Object(u.jsx)("option",{value:"15",children:"15"}),Object(u.jsx)("option",{value:"20",children:"20"}),Object(u.jsx)("option",{value:"25",children:"25"})]})})},m=c(20),w=function(e){var t=e.url,c=e.setPage,a=e.isLoading,s=Object(n.useState)([]),r=Object(o.a)(s,2),i=r[0],l=r[1],j=t,d=j.match(/&gender=(\w{4,6})/);d&&(j=j.replace(d[0],""));var b=function(e){var t=Object(m.a)(i);e.checked?t.push(e.value):t=t.filter((function(t){return t!==e.value})),l(t)};return Object(n.useEffect)((function(){j=j.replace(/(page=)(\d+)/,"$11"),1===i.length&&c(j+"&gender=".concat(i[0])),1!==i.length&&c(j)}),[i]),Object(u.jsxs)("div",{className:"col s3 valign-wrapper",children:[Object(u.jsx)("p",{children:Object(u.jsxs)("label",{children:[Object(u.jsx)("input",{type:"checkbox",value:"male",disabled:a,onChange:function(e){return b(e.target)}}),Object(u.jsx)("span",{children:"Male"})]})}),Object(u.jsx)("p",{children:Object(u.jsxs)("label",{children:[Object(u.jsx)("input",{type:"checkbox",value:"female",onChange:function(e){return b(e.target)},disabled:a}),Object(u.jsx)("span",{children:"Female"})]})})]})},k=function(e,t){if(e){if(!t)return e.map((function(e){var t=Array.isArray(e.books)&&e.books.length>0?e.books.map((function(e){return{id:e.slice(e.lastIndexOf("/")+1),link:e}})):[];return{name:"".concat(e.name?e.name+",":"").concat(Array.isArray(e.aliases)?e.aliases.toString():""),gender:e.gender?e.gender:"Unknown",culture:e.culture?e.culture:"Unknown",books:t,seasons:e.tvSeries.length}}));if(t){var c=new Date(e.released);return{name:e.name,isbn:e.isbn,numberOfPages:e.numberOfPages,released:c.toLocaleDateString("pl-PL")||""}}}},N=(c(46),c(47),function(){var e=Object(n.useState)("https://www.anapioficeandfire.com/api/characters?page=1&pageSize=10"),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(1),r=Object(o.a)(s,2),i=r[0],d=r[1],f=Object(n.useState)(!0),p=Object(o.a)(f,2),m=p[0],N=p[1],S=Object(n.useState)(!1),C=Object(o.a)(S,2),y=C[0],P=C[1],F=Object(n.useState)([]),B=Object(o.a)(F,2),L=B[0],A=B[1],D=Object(n.useState)(null),E=Object(o.a)(D,2),I=E[0],z=E[1];Object(n.useEffect)((function(){(function(){var e=Object(j.a)(l.a.mark((function e(){var t,n,a,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),t=!!~c.indexOf("www.anapioficeandfire.com/api/books"),e.prev=2,e.next=5,b()(c);case 5:n=e.sent,A(k(n.data,t)),P(t),t||(s=null===(a=n.headers.link)||void 0===a?void 0:a.match(/<(.|\n)*?>/gm),r=s[s.length-1].match(/page=(\d+)/)[1],d(r)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),alert("Something went wrong, try again or contact your administrator \n"+e.t0);case 14:N(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}})()()}),[c]);var T=function(e){a(e)};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(h,{isBook:y,goBack:function(){a(I),z(null)},lastPage:i,setPage:T,url:c}),Object(u.jsxs)("div",{className:"container-fixed",children:[Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col s12 inputs-group",children:!y&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(w,{url:c,setPage:T,isLoading:m}),Object(u.jsx)(x,{url:c,setPage:T}),Object(u.jsx)(v,{url:c,setPage:T,isLoading:m})]})})}),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col s12",children:m?Object(u.jsx)(O,{}):Object(u.jsx)(g,{data:L,getBookDetails:function(e){z(c),a(e)},isBook:y})})})]})]})}),S=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,49)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(N,{})}),document.getElementById("root")),S()}},[[48,1,2]]]);
//# sourceMappingURL=main.db69f7e6.chunk.js.map